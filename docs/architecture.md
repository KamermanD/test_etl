# Архитектура DWH (учебный DE-проект)

## Общая идея

Проект демонстрирует построение Data Warehouse в стиле Data Engineering:
- реальный источник данных (PostgreSQL)
- захват изменений (CDC через Debezium + Kafka)
- аналитическое хранилище (ClickHouse)
- трансформации (dbt)
- оркестрация (Airflow)

Архитектура ориентирована на слои:
- STG
- RAW
- ODS

---

## Компоненты

### PostgreSQL (OLTP)
Источник банковских данных:
- клиенты
- счета
- карты
- терминалы
- транзакции

Подключение осуществляется к реальной БД (Yandex Cloud).

---

### Debezium + Kafka (CDC)
- Debezium отслеживает `INSERT / UPDATE / DELETE` в Postgres
- события публикуются в Kafka topics
- используется для near-real-time загрузки изменений

---

### ClickHouse (DWH)
Используется как аналитическое хранилище:
- высокая скорость агрегаций
- поддержка больших фактов
- хорошо работает с dbt

В ClickHouse реализованы слои:
- STG — полные копии таблиц
- RAW — история и SCD2
- ODS — аналитическая модель

---

### dbt
Используется для:
- преобразований STG → RAW → ODS
- реализации SCD2
- подготовки фактов и измерений

---

### Airflow
Оркестрация пайплайнов:
- snapshot / incremental загрузки
- CDC-обновления
- dbt-трансформации
- мониторинг Debezium и Kafka lag
